model:
  _target_: moviescripts.models.BertClassifer
  config:
    dialations:
    - 1
    - 1
    - 1
    - 1
    conv1_kernel_size: 5
    bn_momentum: 0.02
  in_channels: ${data.in_channels}
  out_channels: ${data.num_labels}
loss:
  _target_: torch.nn.CrossEntropyLoss
  ignore_index: ${data.ignore_label}
data:
  train_mode: train
  validation_mode: validation
  test_mode: validation
  in_channels: 512
  num_labels: 24
  ignore_label: 255
  pin_memory: true
  num_workers: 4
  batch_size: 8
  cache_data: false
  train_dataloader:
    _target_: torch.utils.data.DataLoader
    shuffle: true
    pin_memory: ${data.pin_memory}
    num_workers: ${data.num_workers}
    batch_size: ${data.batch_size}
  validation_dataloader:
    _target_: torch.utils.data.DataLoader
    shuffle: false
    pin_memory: ${data.pin_memory}
    num_workers: ${data.num_workers}
    batch_size: ${data.batch_size}
  test_dataloader:
    _target_: torch.utils.data.DataLoader
    shuffle: false
    pin_memory: ${data.pin_memory}
    num_workers: ${data.num_workers}
    batch_size: ${data.batch_size}
  train_dataset:
    _target_: moviescripts.datasets.semseg.SemanticSegmentationDataset
    data_dir: data/processed/starwars
    label_db_filepath: data/processed/starwars/label_database.yaml
    data_percent: 1.0
    mode: ${data.train_mode}
    ignore_label: ${data.ignore_label}
    num_labels: ${data.num_labels}
  validation_dataset:
    _target_: moviescripts.datasets.classification.SemanticSegmentationDataset
    data_dir: data/processed/starwars
    label_db_filepath: data/processed/starwars/label_database.yaml
    data_percent: 1.0
    mode: ${data.validation_mode}
    ignore_label: ${data.ignore_label}
    num_labels: ${data.num_labels}
  test_dataset:
    _target_: moviescripts.datasets.semseg.SemanticSegmentationDataset
    data_dir: data/processed/starwars
    label_db_filepath: data/processed/starwars/label_database.yaml
    data_percent: 1.0
    mode: ${data.test_mode}
    ignore_label: ${data.ignore_label}
    num_labels: ${data.num_labels}
logging:
- _target_: pytorch_lightning.loggers.CSVLogger
  save_dir: ${general.save_dir}
  name: ${general.experiment_id}
  version: ${general.version}
optimizer:
  _target_: torch.optim.AdamW
  lr: 0.01
scheduler:
  scheduler:
    _target_: torch.optim.lr_scheduler.OneCycleLR
    max_lr: ${optimizer.lr}
    epochs: ${trainer.max_epochs}
    steps_per_epoch: -1
  pytorch_lightning_params:
    interval: step
trainer:
  deterministic: true
  max_epochs: 600
  min_epochs: 1
  check_val_every_n_epoch: 20
callbacks:
- _target_: pytorch_lightning.callbacks.ModelCheckpoint
  monitor: val_IoU
  save_last: true
  save_top_k: 1
  mode: max
  dirpath: ${general.save_dir}/${general.experiment_id}/${general.version}
  filename: '{epoch}-{val_IoU:.3f}'
- _target_: pytorch_lightning.callbacks.LearningRateMonitor
general:
  seed: null
  checkpoint: null
  project_name: moviescripts
  workspace: alen.am0161
  experiment_name: baseline
  save_dir: saved/${general.experiment_name}/${now:%Y-%m-%d_%H%M}
  experiment_id: ???
  version: 0.1.1
  devices: ???
  accelerator: ???
